# 基于YOLO的作物病害检测系统 - 详细开发计划

## 🎯 项目目标

基于YOLO目标检测与DeepSeek分析的低成本、高精度、易部署的作物病害检测系统，支持从病害识别到报告生成的完整闭环。

## 📋 核心任务分解

### 阶段一：数据准备与模型训练 (Week 1-3)

#### 1.1 数据集分析与处理
- [x] 数据集路径确认：`F:\photos\Data for Identification of Plant Leaf Diseases Using a 9-layer Deep Convolutional Neural Network\Plant_leaf_diseases_dataset_with_augmentation\Plant_leave_diseases_dataset_with_augmentation`
- [ ] 数据集结构分析
- [ ] 数据预处理脚本开发
- [ ] 数据增强策略制定
- [ ] 训练/验证/测试集划分

#### 1.2 YOLO模型改进与训练
- [ ] 选择合适的YOLO版本（YOLOv8/v11）
- [ ] 模型架构优化
- [ ] 超参数调优
- [ ] 模型训练脚本开发
- [ ] 性能评估指标实现（准确率、召回率、F1-score、mAP）

#### 1.3 模型评估与对比
- [ ] 离线评估框架搭建
- [ ] 与其他模型对比分析
- [ ] 性能优化迭代

### 阶段二：AI服务开发 (Week 2-4)

#### 2.1 Flask AI服务 (ai-service/)
```python
# 核心功能模块
├── app_yolo.py          # 主要服务入口
├── models/              # 模型文件存储
├── utils/
│   ├── image_utils.py   # 图像处理工具
│   ├── model_utils.py   # 模型加载工具
│   └── detection_utils.py # 检测结果处理
├── config/
│   └── model_config.py  # 模型配置
└── requirements.txt     # 依赖管理
```

**开发任务：**
- [ ] YOLO模型加载与推理
- [ ] 图像预处理管道
- [ ] 检测结果后处理
- [ ] API接口设计
- [ ] 错误处理与日志

#### 2.2 DeepSeek API集成
- [ ] DeepSeek API接入
- [ ] 病害分析提示词设计
- [ ] 报告生成模板
- [ ] API调用优化

### 阶段三：后端服务开发 (Week 3-5)

#### 3.1 Spring Boot后端架构
```java
com.graduation.cropdisease/
├── controller/
│   ├── DetectionController.java    # 检测接口
│   ├── UserController.java        # 用户管理
│   ├── ReportController.java      # 报告管理
│   └── SystemController.java      # 系统监控
├── service/
│   ├── DetectionService.java      # 检测业务逻辑
│   ├── ReportService.java         # 报告生成服务
│   ├── UserService.java           # 用户服务
│   └── AIService.java             # AI服务调用
├── entity/
│   ├── DetectionRecord.java       # 检测记录
│   ├── User.java                  # 用户实体
│   ├── Report.java                # 报告实体
│   └── Disease.java               # 病害信息
└── repository/
    ├── DetectionRecordRepository.java
    ├── UserRepository.java
    ├── ReportRepository.java
    └── DiseaseRepository.java
```

**开发任务：**
- [ ] 数据库设计与建表
- [ ] RESTful API设计
- [ ] 文件上传处理
- [ ] AI服务调用集成
- [ ] 用户认证与授权
- [ ] 数据统计与分析

#### 3.2 数据库设计
```sql
-- 用户表
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 检测记录表
CREATE TABLE detection_records (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT,
    image_path VARCHAR(255),
    detected_disease VARCHAR(100),
    confidence DECIMAL(5,4),
    detection_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- 报告表
CREATE TABLE reports (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    detection_id BIGINT,
    analysis_content TEXT,
    treatment_suggestion TEXT,
    generated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (detection_id) REFERENCES detection_records(id)
);

-- 病害信息表
CREATE TABLE diseases (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    crop_type VARCHAR(50),
    symptoms TEXT,
    treatment TEXT,
    prevention TEXT
);
```

### 阶段四：前端界面开发 (Week 4-6)

#### 4.1 Vue.js前端架构
```javascript
src/
├── views/
│   ├── Home.vue           # 首页
│   ├── Detection.vue      # 检测页面
│   ├── History.vue        # 历史记录
│   ├── Dashboard.vue      # 数据看板
│   ├── Report.vue         # 报告详情
│   └── About.vue          # 关于页面
├── components/
│   ├── ImageUpload.vue    # 图像上传组件
│   ├── DetectionResult.vue # 检测结果展示
│   ├── ReportCard.vue     # 报告卡片
│   ├── Chart.vue          # 图表组件
│   └── Navigation.vue     # 导航组件
├── router/
│   └── index.ts           # 路由配置
├── stores/
│   ├── detection.ts       # 检测状态管理
│   └── user.ts            # 用户状态管理
└── utils/
    ├── api.ts             # API调用
    ├── upload.ts          # 文件上传
    └── chart.ts           # 图表工具
```

**开发任务：**
- [ ] 响应式UI设计
- [ ] 图像上传与预览
- [ ] 检测结果可视化
- [ ] 报告展示与下载
- [ ] 数据图表集成
- [ ] 用户交互优化

#### 4.2 核心功能页面

**检测页面功能：**
- 图像拖拽上传
- 实时检测进度
- 结果可视化展示
- 置信度显示
- 报告生成按钮

**数据看板功能：**
- 检测趋势图表
- 病害分布统计
- 检测准确率统计
- 用户活跃度分析

### 阶段五：系统集成与测试 (Week 6-7)

#### 5.1 服务集成
- [ ] AI服务与后端集成测试
- [ ] 前端与后端API联调
- [ ] 端到端功能测试
- [ ] 性能测试与优化

#### 5.2 部署与配置
- [ ] Docker容器化
- [ ] docker-compose编排
- [ ] 生产环境配置
- [ ] 监控与日志系统

### 阶段六：论文撰写 (Week 7-8)

#### 6.1 论文结构
1. **引言**
   - 研究背景与意义
   - 国内外研究现状
   - 论文主要贡献

2. **相关技术**
   - YOLO目标检测算法
   - 深度学习在农业中的应用
   - Web系统架构设计

3. **系统设计**
   - 整体架构设计
   - 模型改进方案
   - 数据库设计
   - 接口设计

4. **系统实现**
   - 模型训练与优化
   - 后端服务实现
   - 前端界面开发
   - AI服务集成

5. **实验与分析**
   - 实验环境搭建
   - 性能评估指标
   - 实验结果分析
   - 对比实验

6. **总结与展望**
   - 工作总结
   - 创新点
   - 不足与改进方向

## 🛠️ 技术选型

### AI模型
- **框架**：PyTorch
- **模型**：YOLOv8/v11
- **数据处理**：OpenCV, PIL
- **部署**：Flask + Gunicorn

### 后端
- **框架**：Spring Boot 2.7+
- **数据库**：MySQL 8.0
- **ORM**：Spring Data JPA
- **安全**：Spring Security
- **文档**：Swagger/OpenAPI

### 前端
- **框架**：Vue.js 3
- **UI库**：Element Plus
- **状态管理**：Pinia
- **构建工具**：Vite
- **图表**：ECharts

### 部署
- **容器化**：Docker
- **编排**：docker-compose
- **反向代理**：Nginx
- **监控**：Prometheus + Grafana

## 📊 性能指标

### 模型性能
- **准确率 (Accuracy)**：> 90%
- **召回率 (Recall)**：> 85%
- **F1-score**：> 87%
- **推理速度**：< 500ms

### 系统性能
- **响应时间**：< 2s
- **并发用户**：> 100
- **可用性**：> 99%
- **数据一致性**：强一致性

## 🔄 开发流程

### 迭代开发模式
1. **需求分析** → 2. **设计开发** → 3. **测试验证** → 4. **部署上线**

### 版本控制
- 主分支：main
- 开发分支：develop
- 功能分支：feature/*
- 修复分支：hotfix/*

### 质量保证
- 代码审查
- 单元测试
- 集成测试
- 性能测试

## 📅 时间节点

| 阶段 | 时间 | 主要任务 | 交付物 |
|------|------|----------|--------|
| 阶段一 | Week 1-3 | 数据准备与模型训练 | 训练好的YOLO模型 |
| 阶段二 | Week 2-4 | AI服务开发 | Flask AI服务 |
| 阶段三 | Week 3-5 | 后端服务开发 | Spring Boot后端 |
| 阶段四 | Week 4-6 | 前端界面开发 | Vue.js前端 |
| 阶段五 | Week 6-7 | 系统集成与测试 | 完整系统原型 |
| 阶段六 | Week 7-8 | 论文撰写 | 毕业论文 |

## 🎯 预期成果

1. **可演示的软件原型**：完整的Web应用系统
2. **完整的系统源码**：包含前端、后端、AI服务的源代码
3. **详实的毕业论文**：符合学术规范的毕业设计论文
4. **性能评估报告**：模型和系统的性能分析报告

## 📝 注意事项

1. **数据安全**：确保用户上传的图像数据安全
2. **模型版权**：使用开源模型，注意许可证
3. **API限制**：DeepSeek API调用频率限制
4. **性能优化**：大图像文件的处理优化
5. **错误处理**：完善的异常处理机制
